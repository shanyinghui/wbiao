<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wbiao.mapper.OrderMapper">
    <insert id="addOrder">
        insert into t_order (id,username,totalMoney,payMoney,source_type,status,receiver_name,receiver_phone,receiver_post_code,receiver_province,receiver_city,receiver_region,receiver_detail_address,note,confirm_status,delete_status,pay_status,create_time,modify_time)
            values (#{id},#{username},#{totalMoney},#{payMoney},#{source_type},#{status},#{receiver_name},#{receiver_phone},#{receiver_post_code},#{receiver_province},#{receiver_city},#{receiver_region},#{receiver_detail_address},#{note},#{confirm_status},#{delete_status},#{pay_status},#{create_time},#{modify_time})
    </insert>
    <update id="updateOrderByPay_success">
        update t_order set status = #{status},payment_time = #{payment_time},pay_status = #{pay_status}
            where id = #{id}
    </update>
    <update id="updateOrderByPay_failed">
        update t_order set delete_status = #{delete_status},pay_status = #{pay_status},modify_time = #{modify_time}
            <if test="payment_time != null">
                payment_time = #{payment_time}
            </if>

            where id = #{id}
    </update>
    <select id="findOrderById" resultType="Order">
        select * from t_order where id = #{id}
    </select>
</mapper>